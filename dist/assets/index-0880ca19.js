(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))l(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const e of o.addedNodes)e.tagName==="LINK"&&e.rel==="modulepreload"&&l(e)}).observe(document,{childList:!0,subtree:!0});function i(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerPolicy&&(o.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?o.credentials="include":t.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function l(t){if(t.ep)return;t.ep=!0;const o=i(t);fetch(t.href,o)}})();deck;const q="pk.eyJ1Ijoia29ieW1vcmVubyIsImEiOiJja2tqd3NmYmswOWc5Mm5tbm92aHk4bzZrIn0.reIvwUnQYc9gCW4IClg1ww",y=document.querySelector(".fill-slider-min"),m=document.querySelector(".fill-slider-max"),P=document.querySelector(".fill-slider-track");let S=y.value,h=m.value;const s=document.querySelector(".density-slider-min"),d=document.querySelector(".density-slider-max"),k=document.querySelector(".density-slider-track");let u=s.value,p=d.value;function f(n,r,i){const l=parseInt(n.value),t=parseInt(r.value);l>=t-1&&(n.value=t-1),t<=l+1&&(r.value=l+1);const o=(n.value-n.min)/(n.max-n.min)*100,e=(r.value-r.min)/(r.max-r.min)*100;i.style.background=`linear-gradient(to right, #E5E7EB ${o}%, #9CA3AF ${o}%, #9CA3AF ${e}%, #E5E7EB ${e}%)`}f(y,m,P);s.addEventListener("input",()=>f(s,d,k));d.addEventListener("input",()=>f(s,d,k));f(s,d,k);document.getElementById("fill-slider");const w=document.getElementById("size-slider");let V=document.getElementById("control-panel-btn"),B=document.getElementById("control-panel"),E=!1;document.getElementById("opacity-scale-cont");let O=document.getElementById("density-chart-cont"),a=-1/0,C=d3.scaleSqrt([0,a],[0,17]),L=[],x=[];const b=function(n,r){document.querySelectorAll(".density-bar").forEach((l,t)=>{t>=n&&t<=r?l.style.opacity=1:l.style.opacity=.2})},I=function(n){return 16+8*w.value},A=function(n){let r=Math.round(C(n.properties.Parcles_CSV_LandArea)),i=0;return n.properties.Parcles_CS==="TRUE"&&r>=u&&r<=p&&(i=255),[0,56,29,i]};let T=document.querySelector("#pin-size-container");for(let n=0;n<6;n++){const r=document.createElement("template");r.innerHTML=`<div class="w-[18px] h-[24px] flex justify-center items-center"><span class="material-symbols-outlined text-green" style="font-size: ${8*((n+3)/3)}px;" >location_on</span></div>`,T.appendChild(r.content)}let z=document.querySelectorAll(".slidecontainer");z.forEach((n,r)=>{let i=n.querySelector(".tick-container"),l=n.dataset.value;for(let t=0;t<=l;t++){const o=document.createElement("template");o.innerHTML='<div class="h-[8px] w-[18px] flex justify-center"><div class="bg-gray-300 w-[1.5px] h-[100%]"></div></div>',i.appendChild(o.content)}});V.addEventListener("click",function(){B.style.top=E?"85vh":"40vh",E=!E});function M(){return fetch("./extentSmall.json").then(n=>n.json()).then(n=>{n.features.forEach(e=>{const c=parseFloat(e.properties.Parcles_CSV_LandArea);e.properties.Parcles_CS==="TRUE"&&L.push(c)}),a=d3.max(L);let r=d3.scalePow([0,a],[25.5*S,25.5*h]).exponent(.75);C=d3.scaleSqrt([0,a],[0,17]);for(let e=0;e<=17;e++)x.push([]);L.forEach(e=>{let c=Math.round(C(e));x.forEach((g,v)=>{c==v&&g.push(c)})}),x.forEach((e,c)=>{const g=document.createElement("template");let v=e.length,_=d3.scalePow([0,1423],[0,24]).exponent(.35)(v);g.innerHTML=`<div class="grow bg-green density-bar" style="height: ${_}px;" id="bar-${c}"></div>`,O.appendChild(g.content)}),b(u,p),console.log("Highest Parcles_CSV_LandArea:",a);function i(e){let c=0;return e.properties.Parcles_CS==="TRUE"&&(c=r(e.properties.Parcles_CSV_LandArea)),[0,120,62,c]}function l(){return new deck.GeoJsonLayer({id:"geojson-layer",data:n,getFillColor:e=>i(e),getLineColor:[255,255,255],getLineWidth:1,lineWidthMinPixels:1,pickable:!0,updateTriggers:{getFillColor:e=>i(e)}})}function t(){return new deck.IconLayer({id:"IconLayer",data:n.features,getColor:e=>A(e),getIcon:e=>"marker",getPosition:e=>[Number(e.properties.centroid_xcoord),Number(e.properties.centroid_ycoord)],getSize:e=>I(),iconAtlas:"./pin_outlined.png",iconMapping:"./pin.json",pickable:!0,updateTriggers:{getSize:e=>I(),getColor:e=>A(e)}})}const o=new deck.DeckGL({mapboxApiAccessToken:q,mapStyle:"mapbox://styles/mapbox/light-v9",initialViewState:{longitude:-90.223526,latitude:38.649401,zoom:15},controller:!0,layers:[l(),t()]});y.addEventListener("input",function(){f(y,m,P),S=y.value,r=d3.scalePow([0,a],[25.5*S,25.5*h]).exponent(.75),o.setProps({layers:[l(),t()]})}),m.addEventListener("input",function(){f(y,m,P),h=m.value,r=d3.scalePow([0,a],[25.5*S,25.5*h]).exponent(.75),o.setProps({layers:[l(),t()]})}),w.addEventListener("input",function(){o.setProps({layers:[l(),t()]})}),s.addEventListener("input",function(){u=s.value,console.log(u),b(u,p),o.setProps({layers:[l(),t()]})}),d.addEventListener("input",function(){p=d.value,console.log(p),b(u,p),o.setProps({layers:[l(),t()]})})})}M().catch(n=>console.error("Error loading parcel data:",n));
