(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))i(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const s of n.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function c(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerPolicy&&(n.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?n.credentials="include":e.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(e){if(e.ep)return;e.ep=!0;const n=c(e);fetch(e.href,n)}})();deck;const v="pk.eyJ1Ijoia29ieW1vcmVubyIsImEiOiJja2tqd3NmYmswOWc5Mm5tbm92aHk4bzZrIn0.reIvwUnQYc9gCW4IClg1ww",h=document.getElementById("fill-slider");let f=5,b=document.getElementById("control-panel-btn"),E=document.getElementById("control-panel"),m=!1;document.getElementById("opacity-scale-cont");let L=document.getElementById("density-chart-cont"),a=-1/0,y=[],u=[];const S=function(r){document.querySelectorAll(".density-bar").forEach((c,i)=>{c.style.opacity=i<=r?1:.2})};let x=document.querySelector("#pin-size-container");for(let r=0;r<6;r++){const l=document.createElement("template");l.innerHTML=`<div class="w-[18px] h-[24px] flex justify-center items-center"><span class="material-symbols-outlined text-green" style="font-size: ${8*((r+3)/3)}px;" >location_on</span></div>`,x.appendChild(l.content)}let C=document.querySelectorAll(".slider");C.forEach((r,l)=>{let c=r.parentElement.querySelector(".tick-container"),i=r.max;for(let e=0;e<=i;e++){const n=document.createElement("template");n.innerHTML='<div class="h-[8px] w-[18px] flex justify-center"><div class="bg-gray-300 w-[1.5px] h-[100%]"></div></div>',c.appendChild(n.content)}});b.addEventListener("click",function(){m==!1?(E.style.top="50vh",m=!0):(E.style.top="80vh",m=!1)});function P(){return fetch("./extentSmall.json").then(r=>r.json()).then(r=>{r.features.forEach(t=>{const o=parseFloat(t.properties.Parcles_CSV_LandArea);o>0&&t.properties.Parcles_CS==="TRUE"&&y.push(o)}),a=d3.max(y);let l=d3.scalePow([0,a],[25.5*f,255]).exponent(.75),c=d3.scaleSqrt([0,a],[0,17]);for(let t=0;t<=17;t++)u.push([]);console.log(u),y.forEach(t=>{let o=Math.round(c(t));u.forEach((d,p)=>{o==p&&d.push(o)})}),u.forEach((t,o)=>{const d=document.createElement("template");let p=t.length,g=d3.scaleSqrt([0,106],[0,24])(p);console.log(g),d.innerHTML=`<div class="grow bg-green density-bar" style="height: ${g}px;" id="bar-${o}"></div>`,L.appendChild(d.content)});let i=document.getElementById("density-slider").value;S(i),console.log("Highest Parcles_CSV_LandArea:",a);function e(t){let o=0;return t.properties.Parcles_CS==="TRUE"&&t.properties.Parcles_CSV_LandArea>0?o=l(t.properties.Parcles_CSV_LandArea):t.properties.Parcles_CS==="TRUE"&&(o=12.5),[0,120,62,o]}function n(){return new deck.GeoJsonLayer({id:"geojson-layer",data:r,getFillColor:t=>e(t),getLineColor:[255,255,255],getLineWidth:1,lineWidthMinPixels:1,pickable:!0,updateTriggers:{getFillColor:t=>e(t)}})}const s=new deck.DeckGL({mapboxApiAccessToken:v,mapStyle:"mapbox://styles/mapbox/light-v9",initialViewState:{longitude:-90.223526,latitude:38.649401,zoom:15},controller:!0,layers:[n()]});h.addEventListener("input",function(){f=h.value,l=d3.scalePow([0,a],[25.5*f,255]).exponent(.75),s.setProps({layers:[n()]})}),document.querySelector("#density-slider").addEventListener("input",function(){i=document.querySelector("#density-slider").value,S(i)})})}P().catch(r=>console.error("Error loading parcel data:",r));
